(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/SalesAnalysisNew/SalesAnalysisNew"],{68:function(t,e,n){"use strict";(function(t,e){var i=n(4);n(26);i(n(25));var a=i(n(69));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n(1)["default"],n(2)["createPage"])},69:function(t,e,n){"use strict";n.r(e);var i=n(70),a=n(72);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n(75);var o,s=n(42),c=Object(s["default"])(a["default"],i["render"],i["staticRenderFns"],!1,null,"2608c6f4",null,!1,i["components"],o);c.options.__file="pages/SalesAnalysisNew/SalesAnalysisNew.vue",e["default"]=c.exports},70:function(t,e,n){"use strict";n.r(e);var i=n(71);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},71:function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return o})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return i}));try{i={qiunDataCharts:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(n.bind(null,77))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.currency(t.initTop.target/1e4)),i=t.currency(t.initTop.sales),a=t.initTop.sales_rate&&t.initTop.sales_rate?(""+t.initTop.sales_rate).indexOf("-"):null,r=t.currency(t.initTop.sales-t.initTop.refunds),o=t.initTop.sales_volume_rate&&t.initTop.sales_volume_rate?(""+t.initTop.sales_volume_rate).indexOf("-"):null,s=t.currency(t.initTop.cancel_order_num),c=t.currency(t.initTop.cancel_order_price),u=t.currency(t.initTop.cancel_order_items),l=t.currency(t.initTop.order_volume),d=t.currency(t.initTop.last_order_volume),p=t.currency(t.initTop.total_items),f=t.currency(t.initTop.last_total_items),m=t.currency(t.initTop.customers),h=t.currency(t.initTop.last_customers),_=t.currency(t.initTop.avg_order_price),g=t.currency(t.initTop.last_avg_order_price),y=t.currency(t.initTop.avg_item_price),v=t.currency(t.initTop.last_avg_item_price),T=t.currency(t.initTop.refunds),b=t.currency(t.initTop.last_refunds),x=t.__map(t.topList,(function(e,n){var i=t.__get_orig(e),a="其他"!=e.name?t.currency(e.sales):null,r="其他"!=e.name&&0!=e.chargeback_num?t.currency(e.chargeback_num):null;return{$orig:i,m18:a,m19:r}}));t.$mp.data=Object.assign({},{$root:{m0:n,m1:i,g0:a,m2:r,g1:o,m3:s,m4:c,m5:u,m6:l,m7:d,m8:p,m9:f,m10:m,m11:h,m12:_,m13:g,m14:y,m15:v,m16:T,m17:b,l0:x}})},r=!1,o=[];a._withStripped=!0},72:function(t,e,n){"use strict";n.r(e);var i=n(73),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},73:function(t,e,n){"use strict";(function(t){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n(74)),r=n(31),o=n(32),s=getApp(),c=function(){n.e("components/header/header").then(function(){return resolve(n(102))}.bind(null,n)).catch(n.oe)},u={components:{headerNavigation:c},data:function(){return{headerHeight:0,isBubble:!1,imgUrl:s.globalData.imgUrl,timeValue:(0,r.formatTime)((new Date).setDate((new Date).getDate()-1)),selectType:"1",timeType:"day",x:0,y:0,current:3,titleList:[{title:"部门占比",key:3},{title:"客户占比",key:2},{title:"城市占比",key:1}],cityList:[],customerList:[],depList:[],topList:[],initTop:{},opts:{title:{name:"80%",fontSize:12,color:"#3C61DF"},extra:{arcbar:{type:"circle",lineCap:"butt"}}},chartData:{},ringChartData:{},ringOpts:{rotate:!1,rotateLock:!1,dataLabel:!1,enableScroll:!1,color:["#2583E3","#DF8A0D","#28AA5C","#8A8DE4"],fontSize:12,legend:{show:!1},title:{name:"部门占比"},subtitle:{name:"",fontSize:10,color:"#111A33"},extra:{ring:{borderWidth:1,ringWidth:35},pie:{border:!1}}},minOpts:{update:!0,animation:!1,duration:0,xAxis:{axisLine:!1,gridColor:"#f1f1f1"},legend:{show:!0,itemGap:5},yAxis:{gridColor:"#f1f1f1",data:[{position:"right",title:"",axisLine:!1,fontColor:"#999999",fontSize:10,titleFontSize:10,titleFontColor:"#999999",min:0,titleOffsetX:5,titleOffsetY:-5},{position:"left",title:"GMV",axisLine:!1,fontColor:"#999999",fontSize:10,titleFontSize:10,titleFontColor:"#999999",min:0,titleOffsetX:-10,titleOffsetY:-5}]}},minChartData:{}}},onLoad:function(){},computed:{statusBarClientRectTop:function(){return"".concat(t.getMenuButtonBoundingClientRect().top+2,"px")}},methods:{getIndex:function(t){a.default.option[t.id].categories,a.default.option[t.id].series,t.currentIndex;var e=t.event.x,n=t.event.y;a.default.instance[t.id].showToolTip({changedTouches:[{x:e,y:n}]},{index:t.currentIndex,formatter:function(t,e,n,i){return"自定义//"+t.name+"//GMV "+t.value+"("+(100*t._proportion_).toFixed(2)+"%)"}})},getTopInit:function(){var t=this,e={"data-type":this.timeType,"data-value":this.timeValue};(0,o.getSalesAnalysis)(e).then((function(e){t.initTop=e.data;var n={series:[{name:"达成率",color:"#3C61DF",data:e.data.sales/e.data.target}]};t.opts.title.name=(e.data.sales/e.data.target*100).toFixed(2)+"%",t.chartData=JSON.parse(JSON.stringify(n))}))},select:function(t){var e=("1"==t?"GMV":"2"==t&&"订单量")||"3"==t&&"总件数"||"4"==t&&"下单客户"||"5"==t&&"客单价"||"6"==t&&"件单价"||"7"==t&&"退货";this.selectType=t,this.minOpts.yAxis.data[1].title=e,this.getCustomSalesInfoCharts()},selectChange:function(t){this.timeValue=t.timeValue,this.timeType=t.timeType,this.current=3,this.ringOpts.title.name="部门占比",this.getTopInit(),this.getCustomSalesInfoCharts()},getCustomSalesInfoCharts:function(){var e=this,n=this;n.$showLoading();var i={"data-type":this.timeType,"data-value":this.timeValue,"data-form":this.selectType};(0,o.getSalesInfoCharts)(i).then((function(n){t.hideLoading(),n.data.trend_data.series.forEach((function(t){"line"!=t.type&&(t.index=1)})),e.minChartData=n.data.trend_data,e.topList=n.data.sp_report_dep_names,e.cityList=n.data.ring_city_list,e.customerList=n.data.ring_customer_list,e.depList=n.data.sp_report_dep_names,e.getRingData()}))},currency:function(t){var e=parseFloat(Number(t)||0);return e=isNaN(e)?void 0:e,Number(e.toFixed(0)).toLocaleString()},onBubble:function(){this.isBubble=!this.isBubble},onTab:function(t){this.current=t,this.topList="1"==t&&this.cityList||"2"==t&&this.customerList||"3"==t&&this.depList,this.ringOpts.title.name=("1"==t?"城市占比":"2"==t&&"客户占比")||"3"==t&&"部门占比",this.getRingData()},getRingData:function(){for(var t=[],e=0;e<this.topList.length;e++){var n={};n.name=this.topList[e].name,n.value=this.topList[e].sales,n.percent=this.topList[e].sales_rate,n.chargeback_num=this.topList[e].chargeback_num,t.push(n)}var i={series:[{data:t}]};this.ringChartData=JSON.parse(JSON.stringify(i))}}};e.default=u}).call(this,n(2)["default"])},75:function(t,e,n){"use strict";n.r(e);var i=n(76),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},76:function(t,e,n){}},[[68,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/SalesAnalysisNew/SalesAnalysisNew.js.map